\begin{verbatim}
     1	#include <bits/stdc++.h>
     2	#include "digraph.h"
     3	using namespace std;
     4	
     5	void digraph::resize(int new_n) {
     6	  n = new_n;
     7	  adj_list.resize(n);
     8	  for (auto v : adj_list) {
     9	    v.clear();
    10	  }
    11	}
    12	
    13	void digraph::load(string file_name) {
    14	  ifstream fin(file_name);
    15	  string line;
    16	  getline(fin, line);
    17	  istringstream iss(line);
    18	  iss >> n;
    19	  resize(n);
    20	  while (!fin.eof()) {
    21	    getline(fin, line);
    22	    if (line.empty()) continue;
    23	    istringstream iss(line);
    24	    char c;
    25	    iss >> c;
    26	    int v, u;
    27	    if (c == 'l') {
    28	      iss >> v;
    29	      while (iss >> u) add_edge(v, u);
    30	    } else if (c == 'p') {
    31	      iss >> v;
    32	      while (iss >> u) {
    33	        add_edge(v, u);
    34	        v = u;
    35	      }
    36	    }
    37	  }
    38	}
    39	
    40	digraph::digraph(string fn) {
    41	  load(fn);
    42	}
    43	
    44	digraph::digraph(int an) : n(an) {
    45	  adj_list.resize(n);
    46	}
    47	
    48	int digraph::count_vertices() {
    49	  return n;
    50	}
    51	
    52	bool digraph::is_edge(int a, int b) {
    53	  assert(a < n);
    54	  for (auto v : adj_list[a]) {
    55	    if (v == b) return true;
    56	  }
    57	  return false;
    58	}
    59	
    60	void digraph::add_edge(int a, int b) {
    61	  assert(a < n && b < n);
    62	  if (is_edge(a, b)) return;
    63	  adj_list[a].push_back(b);
    64	}
    65	
    66	vector<pair<int, int>> digraph::edges() {
    67	  vector<pair<int, int>> es;
    68	  for (int v = 0; v < n; v++) {
    69	    for (int u : adj_list[v]) {
    70	      es.push_back(make_pair(v, u));
    71	    }
    72	  }
    73	  return es;
    74	}
    75	
    76	void digraph::print() {
    77	  cout << "Count of vertices: " << n << '\n';
    78	  cout << "Degree of vertices:\n";
    79	  for (int v = 0; v < n; v++) {
    80	    cout << "\tdeg(" << v << ") = " << degree(v) << endl;
    81	  }
    82	  cout << "Edges:\n";
    83	  for (int v = 0; v < n; v++) {
    84	    for (int u : adj_list[v]) {
    85	      cout << '\t' << v << " -> " << u << '\n';
    86	    }
    87	  }
    88	}
    89	
    90	int digraph::degree(int v) {
    91	  return adj_list[v].size();
    92	}
    93	
    94	vector<int> digraph::output_vertices(int v) {
    95	  return adj_list[v];
    96	}
\end{verbatim}
